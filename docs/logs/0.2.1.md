# 0.2.1 - 迭代规划中

> 主题：持续打磨发行体验，降低分发成本并为自动化测试铺路。

## 🗺️ 目标纲要
- 完善发行包分发链路：覆盖 Arch Linux、Windows、AppImage 等多渠道的自动获取方式。
- 构建基础冒烟测试：补齐健康检查、Telnet 会话、实时语言切换的回归脚本。
- 优化桌面集成：审视快捷方式、协议注册、图标素材的一致性。
- 准备高级功能 MVP：串口/SSH 方案的可行性验证与需求确认。

## ✅ 今日更新（2025-10-14）
- 推送标签 `v0.2.1-alpha.7`，触发全新的 Tauri 构建与发布流水线。
- 完成从 Electron 到 Tauri 的发布链路替换：
	- 新增 `/.github/workflows/tauri.yml`，在 Linux/Windows 分别构建 AppImage 与 MSI，并上传构建产物。
	- 替换 `/.github/workflows/release.yml`，使用 Tauri 构建产物生成 Release（取代 electron-builder）。
- 修复并固化 Tauri 配置与主进程：
	- `src-tauri/build.rs` 补充 `tauri_build::build()`，解决 OUT_DIR 报错。
	- `src-tauri/Cargo.toml` 调整为二进制形态，固定 `tauri = "=2.0.0"` 及插件版本。
	- `src-tauri/tauri.conf.json` 指向 `../out`（Next 导出目录），设置 `devUrl`，配置图标与 `bundle.targets=["appimage","msi"]`。
- 渲染层桥接与类型统一：
	- `components/desktop/tauri-bridge-provider.tsx` 以 Tauri `shell/process` 插件启动 telnet 子进程，统一事件模型（data/exit）。
	- 新增全局类型 `types/desktop-bridge.d.ts`，移除 `any`/`@ts-ignore`，`telnet-terminal` 等组件随之修正。
- Lint/文档优化：
	- `eslint.config.mjs` 忽略 `src-tauri/target/**` 生成物，Lint 归零。
	- `README.md` 增补本地打包产物位置、依赖与使用说明。
- 包分发准备：
	- 调整 `packaging/arch/PKGBUILD`，改为直接下载 Release 中的 AppImage，移除本地构建依赖；同步桌面文件与脚本路径。
- 启动 0.2.1 迭代记录，明确“分发便利化 + 自动化验证”为首要任务。

## ✅ 今日更新（2025-10-13）
- 迁移到 Tauri：新增 `src-tauri` 工程，配置 `tauri.conf.json` 指向 Next 导出的 `out` 目录；主进程 `src/main.rs` 挂载 `process`/`shell` 插件（暂未启用 PTY 插件）。
- 新增 `TauriBridgeProvider`，在渲染层适配 `window.desktopBridge` 契约（终端、设置、健康检查等）。
- `package.json` 替换 Electron 构建脚本为 Tauri（dev/build），并加入所需 Tauri 依赖；Next 改为固定 `export` 输出。
- 移除 Electron 后处理逻辑，删除 `scripts/postinstall.js` 与相关依赖，准备后续移除 Electron 目录与配置。
- 在 Linux 环境下验证 `pnpm install` 能顺利完成，确保开发者无需手动执行 `electron-rebuild`。

## 🔜 待办清单
- [ ] 更新 Arch Linux AUR 提交流程，验证新的 PKGBUILD 可直接复用 Release 产物。
- [ ] 设计并实现首批自动化冒烟脚本，纳入 CI 流水线。
- [ ] 评估串口/SSH 支持的接口方案，输出技术调研报告。
- [ ] 对照多平台快捷方式与协议注册行为，列出修复清单。

> 备注：0.2.1 在 0.2.0 基础上聚焦“分发便利性 + 自动化验证”，目标是缩短发布后的用户获取路径。