# 0.2.1 - 迭代规划中

> 主题：持续打磨发行体验，降低分发成本并为自动化测试铺路。

## 🗺️ 目标纲要
- 完善发行包分发链路：覆盖 Arch Linux、Windows、AppImage 等多渠道的自动获取方式。
- 构建基础冒烟测试：补齐健康检查、Telnet 会话、实时语言切换的回归脚本。
- 优化桌面集成：审视快捷方式、协议注册、图标素材的一致性。
- 准备高级功能 MVP：串口/SSH 方案的可行性验证与需求确认。

## ✅ 今日更新（2025-10-14）
- 调整 `packaging/arch/PKGBUILD`，改为直接下载 GitHub Release 中已构建的 AppImage，移除本地构建依赖。
- 为 PKGBUILD 同步打包所需脚本/桌面文件，并统一安装路径，以便随发布版本快速更新。
- 启动 0.2.1 迭代记录，明确发行分发便利化作为首要任务。

## ✅ 今日更新（2025-10-13）
- 新增 `scripts/postinstall.js`，优先调用 `electron-builder install-app-deps` 并在失败时自动回退至 `electron-rebuild`，解决 `@img/sharp-*` 目录缺失导致的安装中断。
- 调整 `package.json` 的 `postinstall` 脚本以复用上述逻辑，并允许运维通过 `PNET_SKIP_POSTINSTALL=1` 跳过重建过程。
- 扩展回退策略：在缺少开发依赖或执行环境仅安装生产依赖时自动切换至 `pnpm dlx electron-rebuild --only node-pty --version <electron>`，确保 GitHub Actions（Windows/Linux）均能稳定重建。
- 在 Linux 环境下验证 `pnpm install` 能顺利完成，确保开发者无需手动执行 `electron-rebuild`。

## 🔜 待办清单
- [ ] 更新 Arch Linux AUR 提交流程，验证新的 PKGBUILD 可直接复用 Release 产物。
- [ ] 设计并实现首批自动化冒烟脚本，纳入 CI 流水线。
- [ ] 评估串口/SSH 支持的接口方案，输出技术调研报告。
- [ ] 对照多平台快捷方式与协议注册行为，列出修复清单。

> 备注：0.2.1 在 0.2.0 基础上聚焦“分发便利性 + 自动化验证”，目标是缩短发布后的用户获取路径。